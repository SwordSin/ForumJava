<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.forum.RegisterInfoMapper">
    <!--    public Account getAcct(Long id); -->


<!--    去掉password-->
<!--    AES_DECRYPT(UNHEX(password),'key') as password,-->
    <select id="getRegisterInfoList" resultType="com.dao.pojo.login.RegisterInfo" parameterType="com.dao.pojo.login.LoginDataDO">
        SELECT user_id,phone,email,username,net_name FROM register_info
        where username = #{username} and  password = HEX(AES_ENCRYPT(#{password}, 'key'))
    </select>


    <insert id="insertRegisterInfo" keyProperty="userId" useGeneratedKeys="true" parameterType="com.dao.pojo.login.RegisterInfo">
        insert into register_info(phone, email, password, username, net_name) values (
            #{phone}, #{email}, HEX(AES_ENCRYPT(#{password}, 'key')), #{username}, #{netName}
        )
    </insert>

</mapper>